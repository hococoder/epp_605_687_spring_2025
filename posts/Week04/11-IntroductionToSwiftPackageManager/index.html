<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week04/11-IntroductionToSwiftPackageManager"/><meta name="twitter:url" content="https://hococoder.com/posts/Week04/11-IntroductionToSwiftPackageManager"/><meta name="og:url" content="https://hococoder.com/posts/Week04/11-IntroductionToSwiftPackageManager"/><title>Week 4 - Introduction to Swift Package Manager | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 4 - Introduction to Swift Package Manager | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 4 - Introduction to Swift Package Manager | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Mobile Application Development for the iOS Platform</a><nav><ul><li><a href="/epp_605_687_fall_2023/posts/Intro/About Me">AboutMe</a></li><li><a href="/epp_605_687_fall_2023/posts/Intro/Example App">ExampleApp</a></li><li><a href="/epp_605_687_fall_2023/posts/Week00/00-Week00Overview">Week0</a></li><li><a href="/epp_605_687_fall_2023/posts/Week01/00-Week01Overview">Week1</a></li><li><a href="/epp_605_687_fall_2023/posts/Week02/00-Week02Overview">Week2</a></li><li><a href="/epp_605_687_fall_2023/posts/Week03/00-Week03Overview">Week3</a></li><li><a href="/epp_605_687_fall_2023/posts/Week04/00-Week04Overview">Week4</a></li><li><a href="/epp_605_687_fall_2023/posts/Week05/00-Week05Overview">Week5</a></li><li><a href="/epp_605_687_fall_2023/posts/Week06/00-Week06Overview">Week6</a></li><li><a href="/epp_605_687_fall_2023/posts/Week07/00-Week07Overview">Week7</a></li><li><a href="/epp_605_687_fall_2023/posts/Week08/00-Week08Overview">Week8</a></li><li><a href="/epp_605_687_fall_2023/posts/Week09/00-Week09Overview">Week9</a></li><li><a href="/epp_605_687_fall_2023/posts/Week10/00-Week10Overview">Week10</a></li><li><a href="/epp_605_687_fall_2023/posts/Week11/00-Week11Overview">Week11</a></li><li><a href="/epp_605_687_fall_2023/posts/Week12/00-Week12Overview">Week12</a></li><li><a href="/epp_605_687_fall_2023/posts/Week13/00-Week13Overview">Week13</a></li></ul></nav></div></header><div class="wrapper"><h1>Week 4 - Introduction to Swift Package Manager</h1><p style="float: left">Previous:  <A HREF="../10-UpdatingYourAppForCloudKit/index.html">Updating Your App for CloudKit</A></p><p style="float: right">Next:  <A HREF="../../Week05/00-Week05Overview/index.html">Week 5 Overview</A></p><BR/><BR/><h2>Overview</h2><center> <iframe width="1280" height="720" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.81.2/mwEmbedFrame.php/p/1458241/uiconf_id/14487351/entry_id/1_nlv7bny0?wid=_1458241&iframeembed=true&playerId=kaltura_player&entry_id=1_nlv7bny0&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[mediaProxy.preferedFlavorBR]=2500&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;flashvars[EmbedPlayer.NotPlayableDownloadLink]=true;&wid=1_abkvs1gz"allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player">
  </iframe>
</center><p>When developing software, the phrase "don't reinvent the wheel" often comes to mind. For years now, Xcode has supported the use of third party libraries and frameworks in Xcode so you can use code developed by other developers in your app. Framework managers like Carthage and CocoaPods came onto the scene, collecting published libraries to central locations and giving developers an easy way to install them in their apps.</p><p>With Xcode 11 however, Apple went a step further and introduced the Swift Package Manager, which is their built in way of dealing with installing third party libraries into your development environment, and better yet, keeping track of dependencies of those libraries.</p><p>While not directly related to helping your app talk to the network, you can install packages that help you in this manner. For this example, we're going to add the Alamofire package into our project. Alamofire is a popular networking library that sits on top of the built in networking APIs, making things a bit easier for the user.<br><br>In Xcode, go to File -&gt; Swift Packages -&gt; Add Package Dependency</p><img src="../../../week04/addPackage.png#centerResizedSlide" alt="Adding a new package"/><p>Drop the following URL in the search box, and click next:</p><pre><code>https://github.<span class="property">com</span>/<span class="type">Alamofire</span>/<span class="type">Alamofire</span>.<span class="property">git</span>
</code></pre><p>You'll see a list of options - go with the defaults. If you need to bound the version of the library you are working with (to maintain stability in your app, for example), you can either choose a given version range, branch, or commit in the repository to use.</p><img src="../../../week04/spmOptions.png#centerResizedSlide" alt="SPM options"/><p class="info">The current next major version available is most likely different from what you see in the screenshot above</p><p>Keep the default options for now and click next. Xcode will then work its magic by reaching out to github and pulling not only Alamofire but any required dependencies it may have (it doesn't have any). When it is complete, you will see a new "Swift Package Dependencies" section of the Project Navigator on the left hand side of Xcode. There, you'll see the version number, as well as a read only version of the code that makes up the packages (local swift packages are read/write, however). This lets you take a quick look at the code right in Xcode without having to go to github.</p><img src="../../../week04/spmDependencies.png#centerResizedSlide" alt="SPM Dependencies"/><p>The above set of dependencies is what I use to generate the website you're reading right now. Yes, this website was written using Swift, and parsed and generated by packages that use Swift!</p><h2>Using Alamofire</h2><p>So now with Alamofire in the project, how can you use it? Let's replicate the example from the networking module using Alamofire</p><pre><code><span class="keyword">import</span> Alamofire

<span class="type">AF</span>.<span class="call">request</span>(<span class="string">"http://159.203.191.136/Josh.png"</span>).<span class="call">validate</span>().<span class="property">responseData</span>{ response <span class="keyword">in
  do</span> {
    <span class="keyword">let</span> data = <span class="keyword">try</span> response.<span class="property">result</span>.<span class="call">get</span>()
    <span class="keyword">guard let</span> photo = <span class="type">UIImage</span>(data: data) <span class="keyword">else</span> { <span class="keyword">return</span> }
    photo
  } <span class="keyword">catch</span> {
    <span class="call">print</span>(<span class="string">"Error getting data from web</span> \(error)<span class="string">"</span>)
  }
}
</code></pre><p>A new feature in Xcode 12 allows playgrounds to use packages imported via Swift Package Manager, so if you look at the playground page for this module in the EPExampleApp, you'll see the code in this section. (If for some reason the project complains that it can't find the Alamofire framework, select the Week04 playground, and in the File inspector on the right hand side of Xcode, turn off and back on the "Build Active Scheme" checkbox - this will cause it to rebuild the playground, and correctly sense the added SPM framework.)</p><p>Ok, back to the code. If anything, this definitely reduces the overall code. No need to worry about setting up sessions - Alamofire handles that behind the scenes. <code>validate()</code> checks to make sure that the response code is in the valid range (200 to 299) and that if requested, the return type is correct. The rest is pretty much the same as before. When you run this part of the playground the results gutter on the right hand side shows that you the image you downloaded if you click on the "eye" or square symbols. Let's take a look at the upload request we tried before</p><pre><code><span class="keyword">let</span> imageMetadata =
[
  <span class="string">"name"</span>: <span class="string">"Josh.png"</span>,
  <span class="string">"description"</span>: <span class="string">"Josh Steele explains the sticker he's holding, describing the last command load"</span>
]

<span class="type">AF</span>.<span class="call">request</span>(<span class="string">"http://159.203.191.136:8080/uploadImageMetadata"</span>, 
          method: .<span class="dotAccess">post</span>, 
          parameters: imageMetadata, 
          encoder: <span class="type">JSONParameterEncoder</span>.<span class="property">default</span>)
  .<span class="dotAccess">responseString</span>{ response <span class="keyword">in</span>

    <span class="call">print</span>(response.<span class="property">result</span>)

}
</code></pre><p>Here, I've changed the string to an array of key-value pairs which will get encoded to JSON when I post it. The Alamofire request is again, nice and compact, letting you specify the URL, the method (a POST method this time to send data to the server), any parameters (here, it's the set of values you want to push up to the server), and how it should be encoded - here it is using a <code>JSONParameterEncoder</code>.<br><br>If you run this in the playground you'll get this response:</p><pre><code><span class="call">success</span>(<span class="string">"Successful! Josh.png"</span>)
</code></pre><p>This shows a success response from the server, and says that posting the image metadata was successful.<br><br>You can change the various passed in parameters to do all sort of calls to the server, write your own closures to decode the responses, get the data from it, and use it in your model.</p><p style="float: left">Previous:  <A HREF="../10-UpdatingYourAppForCloudKit/index.html">Updating Your App for CloudKit</A></p><p style="float: right">Next:  <A HREF="../../Week05/00-Week05Overview/index.html">Week 5 Overview</A></p></div><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated October 23, 2023 at 8:47 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></body></html>