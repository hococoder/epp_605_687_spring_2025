<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week03/11-ConvertingToSwiftData"/><meta name="twitter:url" content="https://hococoder.com/posts/Week03/11-ConvertingToSwiftData"/><meta name="og:url" content="https://hococoder.com/posts/Week03/11-ConvertingToSwiftData"/><title>Week 3 - Converting to SwiftData | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 3 - Converting to SwiftData | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 3 - Converting to SwiftData | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><script src="../../../../jquery-3.7.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><div class="layout"><div class="header"><div class="headerLayout"><div class="title">Mobile Application Development for the iOS Platform</div><div class="subtitle">Engineering Program for Professionals - 605.687 - 2024-2025 Academic Year</div><div class="weeklayout"><a class="grow1" href="/epp_605_687_spring_2025/posts/Intro/About Me">About Me</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Intro/Example App">Example App</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week00/00-Week00Overview">Week 0</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week01/00-Week01Overview">Week 1</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week02/00-Week02Overview">Week 2</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week03/00-Week03Overview">Week 3</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week04/00-Week04Overview">Week 4</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week05/00-Week05Overview">Week 5</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week06/00-Week06Overview">Week 6</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week07/00-Week07Overview">Week 7</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week08/00-Week08Overview">Week 8</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week09/00-Week09Overview">Week 9</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week10/00-Week10Overview">Week 10</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week11/00-Week11Overview">Week 11</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week12/00-Week12Overview">Week 12</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week13/00-Week13Overview">Week 13</a></div></div></div><div class="wrapper"><h1>Week 3 - Converting to SwiftData</h1><p style="float: left">Previous:  <A HREF="../../Week03/10-SwiftUIImprovements/index.html">SwiftUI Improvements</A></p><p style="float: right">Next:  <A HREF="../../Week04/00-Week04Overview/index.html">Week 04 Overview</A></p><BR/><BR/><div id="floater">
<h3><u>Page Contents</u></h3>
<ul><li><a href="#someWarningsUpfront">Some Warnings Upfront</a></li><li><a href="#makingThingsSimplerWithSwiftdata">Making things simpler with SwiftData</a></li></ul></div><a name="someWarningsUpfront"></a>
<h2>Some Warnings Upfront</h2><p>Ok, an up front set of warnings:</p><ul><li>SwiftData, as of 2024, is still VERY new. It is, at this point, not meant to be a complete replacement for Core Data, since it simply cannot do everything Core Data can.</li><li>However, for the basics we'll cover in this class, SwiftData works well! If you need more complex functionality for your final project, you may want to use Core Data.</li><li>Along those same lines, there are bound to be many bugs in SwiftData.</li></ul><a name="makingThingsSimplerWithSwiftdata"></a>
<h2>Making things simpler with SwiftData</h2><p>Let's say you have an existing app that uses Core Data, but you want to switch to SwiftData. What do you need to do?</p><h3>Convert your <code>xcdatamodeld</code> file to a series of <code>@Model</code> classes</h3><p>Each entity in your <code>xcdatamodeld</code> - and their associated relationships - can be converted to a series of classes decorated with a <code>@Model</code> macro. We saw an example of this in the last module where we defined the <code>Assignment</code> and <code>AssignmentGrade</code> classes. Relationships are simply defined by declaring that one class depend on the other. You only need to define one side of the relationship - SwiftData will handle the other direction. In the case of the <code>Assignment</code>, the grades were declared with an array of <code>AssignmentGrade</code>s, which means that an assignment has 1 or more grades attached to it. The inferred inverse here is that each grade only has one assignment associated with it.</p><p>Once you have all your <code>@Model</code> objects in place, you can delete your <code>xcdatamodeld</code> file!</p><h3>Convert all your <code>@FetchRequest</code>s to <code>@Query</code> calls</h3><p>SwiftData uses <code>@Query</code> to perform the queries, which syntactically can be much more compact that <code>@FetchRequest</code>. Remember that <code>@Query</code> uses the Observation mechanism that was introduced in iOS 17 to automatically refresh the user interface when changes to the database take place (if they in turn change the results of your query).</p><h3>Remove the <code>Persistence.swift</code> file</h3><p>Once you switch to SwiftData, there is no need to have the Persistence.swift file setup the CoreData persistence stack. However, you may still want to have a preview container for your SwiftUI Previews! You can do that like this:</p><pre><code><span class="keyword">static let</span> container = <span class="keyword">try</span>! <span class="type">ModelContainer</span>(for: [<span class="type">Assignment</span>.<span class="keyword">self</span>, <span class="type">AssignmentGrade</span>.<span class="keyword">self</span>], configurations: <span class="type">ModelConfiguration</span>(inMemory: <span class="keyword">true</span>)
</code></pre><p>This looks very similar to the <code>.modelContainer</code> modifier. In fact there is a version of <code>.modelContainer</code> that takes in a <code>ModelContainer</code>:</p><pre><code>.<span class="call">modelContainer</span>(container)
</code></pre><p>So in your preview code, you can simply attach that modifier onto whatever view needs the SwiftData model and you're set!</p><p>That is the basics on upgrading your Core Data model to a SwiftData one, with more to come I'm sure as SwiftData reaches more parity with Core Data.</p><p style="float: left">Previous:  <A HREF="../../Week03/10-SwiftUIImprovements/index.html">SwiftUI Improvements</A></p><p style="float: right">Next:  <A HREF="../../Week04/00-Week04Overview/index.html">Week 04 Overview</A></p><BR/><BR/></div><leftside><u><p>Week 3</p></u><div class="weekSection"><ul><li><div class="comment-container"><div class="tocItem"><a id="Week 3 Overview" href="../../Week03/00-Week3Overview/index.html">Week 3 Overview</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Your Apps Directory Structure" href="../../Week03/01-YourAppsDirectoryStructure/index.html">Your Apps Directory Structure</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Introduction to User Defaults" href="../../Week03/02-IntroductionToUserDefaults/index.html">Introduction to User Defaults</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Introduction to the Codable Protocol" href="../../Week03/03-IntroductionToTheCodableProtocol/index.html">Introduction to the Codable Protocol</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Introduction to SwiftData" href="../../Week03/04-IntroductionToSwiftData/index.html">Introduction to SwiftData</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Introduction to CoreData" href="../../Week03/05-IntroductionToCoreData/index.html">Introduction to CoreData</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Setting up a Schema" href="../../Week03/06-SettingUpASchema/index.html">Setting up a Schema</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="NSManagedObjects" href="../../Week03/07-NSManagedObjects/index.html">NSManagedObjects</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Storing and Fetching" href="../../Week03/08-StoringAndFetching/index.html">Storing and Fetching</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Populating the Database" href="../../Week03/09-PopulatingTheDatabase/index.html">Populating the Database</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="SwiftUI Improvements" href="../../Week03/10-SwiftUIImprovements/index.html">SwiftUI Improvements</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Converting to SwiftData" href="../../Week03/11-ConvertingToSwiftData/index.html">Converting to SwiftData</a></div></div></li></ul></div></leftside><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated January 25, 2025 at 6:17 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></div></body></html>