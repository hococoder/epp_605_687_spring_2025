<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week13/01-IntroductionToUserFeedback"/><meta name="twitter:url" content="https://hococoder.com/posts/Week13/01-IntroductionToUserFeedback"/><meta name="og:url" content="https://hococoder.com/posts/Week13/01-IntroductionToUserFeedback"/><title>Introduction to User Feedback | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Introduction to User Feedback | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Introduction to User Feedback | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><script src="../../../../jquery-3.7.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><div class="layout"><div class="header"><div class="headerLayout"><div class="title">Mobile Application Development for the iOS Platform</div><div class="subtitle">Engineering Program for Professionals - 605.687 - 2024-2025 Academic Year</div><div class="weeklayout"><a class="grow1" href="/epp_605_687_spring_2025/posts/Intro/About Me">About Me</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Intro/Example App">Example App</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week00/00-Week00Overview">Week 0</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week01/00-Week01Overview">Week 1</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week02/00-Week02Overview">Week 2</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week03/00-Week03Overview">Week 3</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week04/00-Week04Overview">Week 4</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week05/00-Week05Overview">Week 5</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week06/00-Week06Overview">Week 6</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week07/00-Week07Overview">Week 7</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week08/00-Week08Overview">Week 8</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week09/00-Week09Overview">Week 9</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week10/00-Week10Overview">Week 10</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week11/00-Week11Overview">Week 11</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week12/00-Week12Overview">Week 12</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week13/00-Week13Overview">Week 13</a></div></div></div><div class="wrapper"><h1>Introduction to User Feedback</h1><p style="float: left">Previous:  <A HREF="../../Week13/00-Week13Overview/index.html">Week 13 Overview</A></p><p style="float: right">Next:  <A HREF="../../Week13/02-IntroductionToTheDeveloperPortal/index.html">Introduction to the Developer Portal</A></p><BR/><BR/><a name="overview"></a>
<h2>Overview</h2><center><iframe id="myIframe" src="https://jh.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=bc22e304-4f72-4a54-b488-b1ba01484dfb&autoplay=false&offerviewer=true&showtitle=true&showbrand=true&captions=false&interactivity=all"  style="border: 1px solid #464646;" allowfullscreen allow="autoplay" aria-label="Panopto Embedded Video Player" aria-description="Week0-04-THIRDPARTYTOOLS-Lecture" ></iframe></center><p>If you’ve used apps at all over the years, you’ve most likely been presented - and at sometime inundated - with prompts asking you to review this app! Whether it’s leaving stars, getting shuffled over to the app store, doing the rating now, later, or never, or asking if you love an app - many of the experiences were different from one another!</p><img src="../../../week11/Slide27.png#centerResizedSlide" alt="Rate My App"/><p>Apple decided to put a stop to this behavior with iOS 10.3, requiring users to use a standard review popup, or risk getting your app rejected during App Store review. To use this new class, called <code>SKStoreReviewController</code>, you place a call to the controller in places in your app where you want to ask for feedback.</p><p>The controller only displays itself if:</p><ul><li>the request hasn’t been made recently</li><li>the user hasn’t already given feedback.</li></ul><p>This helps eliminate the case of some apps that seem to ask for a review every time you use it. A BIG thing to keep in mind though - the popup <strong><em>can only be displayed 3 times every 365 days</em></strong>!</p><a name="respondingToFeedback"></a>
<h2>Responding To Feedback</h2><p>In addition to asking for feedback in your app, you can now respond to user’s feedback in the App Store. iTunes Connect, which we’ll talk about in a later module, presents information about your app, including the reviews left by your users. You can reply to those reviews, and in the app store, your response is labeled as a “Developer’s Response”.</p><img src="../../../week11/Slide29.png#centerResizedSlide" alt="Developer Feedback"/><p>One of the biggest complaints about reviews in previous iOS versions was the fact that, even though you would release a new version of your app, which may resolve many of the complaints people had about the previous version, those old ratings would stick around. Now, you can reset your app’s rating when you release a new version - but use this sparingly. Some people actually use the number of reviews for an app as a metric to determine whether to even bother downloading it or not.</p><a name="example"></a>
<h2>Example</h2><center> <iframe id="myIframe" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.81.2/mwEmbedFrame.php/p/1458241/uiconf_id/14487351/entry_id/1_8yy5q8jm?wid=_1458241&iframeembed=true&playerId=kaltura_player&entry_id=1_8yy5q8jm&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[mediaProxy.preferedFlavorBR]=2500&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;flashvars[EmbedPlayer.NotPlayableDownloadLink]=true;&wid=1_abkvs1gz"allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player">
  </iframe>
</center><p>Let's look at how you how you can prompt a user for an App Store rating from within your app. If you recall from the presentation video, the <code>SKStoreReviewController</code> limits the number of times (3 a year!) that you can prompt a user for feedback. In addition to this constraint, you want to be smart about where in your app’s functionality you ask for feedback. We can make a small example here that shows you how to do both with the help of <code>UserDefaults</code>. I don’t want to ask the user to provide a rating unless they’ve used the app a certain number of times, so let’s store the launch count in UserDefaults.</p><h3>The older way:</h3><p>The old way of doing this (see below for a newer method) involves getting the current scene of the tool, and calling a method on <code>SKStoreReviewController</code>:</p><pre><code><span class="keyword">import</span> StoreKit

<span class="comment">//........

//get the current scene</span>
<span class="keyword">guard let</span> currentScene = <span class="type">UIApplication</span>.<span class="property">shared</span>.<span class="property">connectedScenes</span>.<span class="property">first</span> <span class="keyword">as</span>? <span class="type">UIWindowScene</span> <span class="keyword">else</span> {
      <span class="call">print</span>(<span class="string">"Can't get current scene"</span>)
      <span class="keyword">return</span>
}

<span class="comment">// show review dialog</span>
<span class="type">SKStoreReviewController</span>.<span class="call">requestReview</span>(in: currentScene)
</code></pre><p>However, this isn't totally intuitive (we have never talked about <code>UIWindowScene</code>!). So, a new method was devised using the <code>Environment</code></p><h3>The newer way:</h3><ul><li>NOTE: This does NOT work with the Homework 11 starter, for reasons I have yet to track down... use the old way instead.</li></ul><ul><li>Setup a user defaults object we can refer to</li><li>In your <code>ContentView</code> struct, query the <code>launchedCount</code> key from <code>UserDefaults</code>. If this key doesn’t exist - which it won’t at the first launch ever - the query will return 0.</li><li>Up the value of currentLaunchCount by 1, and then re-set it in user defaults to we can refer to it later.</li><li>Don’t forget to import <code>StoreKit</code></li><li>Get access to the environment's request review key and assign it to the property "requestReview". A recent update to Swift allows properties like this to also be called as functions.</li></ul><pre><code><span class="keyword">import</span> StoreKit

<span class="keyword">struct</span> ContentView: <span class="type">View</span> {
  
  <span class="keyword">let</span> defaults = <span class="type">UserDefaults</span>.<span class="property">standard</span>
  <span class="keyword">@Environment</span>(\.<span class="property">requestReview</span>) <span class="keyword">var</span> requestReview
  
  <span class="keyword">init</span>() {
    <span class="keyword">var</span> currentLaunchCount = defaults.<span class="call">integer</span>(forKey: <span class="string">"launchedCount"</span>)
    currentLaunchCount += <span class="number">1</span>
    <span class="call">print</span>(<span class="string">"current launch count</span> \(currentLaunchCount)<span class="string">"</span>)
    defaults.<span class="call">set</span>(currentLaunchCount, forKey: <span class="string">"launchedCount"</span>)
  }
</code></pre><ul><li>Next, make a button on our <code>body</code> inside the <code>UserFeedbackView</code>- we’ll set the title to “Do a very important thing!”. This button will trigger the possibility for a review, but we’ve tied the review request to some milestone in our app after which we may want to ask the user for feedback. This could be when they have completed a major task in the app.</li><li>Since we can call the property as a function, in the action closure for the Button, call <code>requestReview()</code>, but only as long as the launched count has hit 3 (this number should probably be higher in practice, but I wanted it small for the sake of the demo).</li></ul><pre><code><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
  <span class="type">Button</span>(<span class="string">"Very Important Activity!"</span>) {
    <span class="comment">//do something very important here that denotes a milestone in your app, after which you might want to have a user leave a review
    
    //request a review - note, it may not appear!</span>
    <span class="keyword">if self</span>.<span class="property">defaults</span>.<span class="call">integer</span>(forKey: <span class="string">"launchedCount"</span>) == <span class="number">3</span>
    {
        <span class="call">requestReview</span>()
    }
  }
}
</code></pre><p>If we run this in the simulator, and try pushing the button nothing happens - we’ve only launched it once. The same thing happens on the second launch, but on the third, the app brings up the review alert, giving the user the chance to leave a rating, or defer it until later. A single one line request is all you need to request that the system prompt for a review, but you have to be smart as to how often you request the review, and where you request it in your code.</p><p style="float: left">Previous:  <A HREF="../../Week13/00-Week13Overview/index.html">Week 13 Overview</A></p><p style="float: right">Next:  <A HREF="../../Week13/02-IntroductionToTheDeveloperPortal/index.html">Introduction to the Developer Portal</A></p><BR/><BR/></div><leftsideempty></leftsideempty><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated February 1, 2025 at 3:31 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></div></body></html>