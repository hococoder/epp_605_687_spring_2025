<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week08/02-AVKitExample"/><meta name="twitter:url" content="https://hococoder.com/posts/Week08/02-AVKitExample"/><meta name="og:url" content="https://hococoder.com/posts/Week08/02-AVKitExample"/><title>Week 8 - AVKit Example | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 8 - AVKit Example | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 8 - AVKit Example | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><script src="../../../../jquery-3.7.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><div class="layout"><div class="header"><div class="headerLayout"><div class="title">Mobile Application Development for the iOS Platform</div><div class="subtitle">Engineering Program for Professionals - 605.687 - 2024-2025 Academic Year</div><div class="weeklayout"><a class="grow1" href="/epp_605_687_spring_2025/posts/Intro/About Me">About Me</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Intro/Example App">Example App</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week00/00-Week00Overview">Week 0</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week01/00-Week01Overview">Week 1</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week02/00-Week02Overview">Week 2</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week03/00-Week03Overview">Week 3</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week04/00-Week04Overview">Week 4</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week05/00-Week05Overview">Week 5</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week06/00-Week06Overview">Week 6</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week07/00-Week07Overview">Week 7</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week08/00-Week08Overview">Week 8</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week09/00-Week09Overview">Week 9</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week10/00-Week10Overview">Week 10</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week11/00-Week11Overview">Week 11</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week12/00-Week12Overview">Week 12</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week13/00-Week13Overview">Week 13</a></div></div></div><div class="wrapper"><h1>Week 8 - AVKit Example</h1><p style="float: left">Previous:  <A HREF="../../Week08/01-IntroductionToAVKit/index.html">Introduction to AVKit</A></p><p style="float: right">Next:  <A HREF="../../Week08/03-IntroductionToInAppPurchases/index.html">Introduction to InAppPurchases</A></p><BR/><BR/><a name="exampleLoadingAVideo"></a>
<h2>Example - Loading a Video</h2><center><iframe id="myIframe" src="https://jh.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=eff9dae0-0316-49a6-b736-b1bb011789b6&autoplay=false&offerviewer=true&showtitle=true&showbrand=true&captions=false&interactivity=all"  style="border: 1px solid #464646;" allowfullscreen allow="autoplay" aria-label="Panopto Embedded Video Player" aria-description="Week0-04-THIRDPARTYTOOLS-Lecture" ></iframe></center><p class="new"> The video above shows the iOS 13 example below, but the code snippet shows the iOS 14 VideoPlayer view, and is in the EPExampleApp if you want to take a look</p><p>iOS 14 has the luxury of having a new <code>ViewPlayer</code> view built into SwiftUI, and it's really easy to display a video in your view:</p><pre><code><span class="keyword">struct</span> AVKitView: <span class="type">View</span> {
  
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
      
      <span class="keyword">let</span> url = <span class="type">URL</span>(string: <span class="string">"http://159.203.191.136/8-Week8-Introduction.mp4"</span>)!
      <span class="keyword">let</span> player = <span class="type">AVPlayer</span>(url: url)
      
      <span class="type">VideoPlayer</span>(player: player)
    }
}

</code></pre><p>However, similar to the MapView, this is pretty basic, only giving you the playback and basic controls.</p><p>To do anything else we still need to implement the iOS 13 way of doing things, so we can get features like Picture in Picture. This requires wrapping the <code>AVPlayerViewController</code> in a <code>UIViewControllerRepresentable</code>, similar to the alternate way of getting a MapView (except then we were using a <code>UIViewRepresentable</code>)</p><pre><code><span class="keyword">struct</span> AVKitView2: <span class="type">View</span> {
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">AVPlayerView</span>()
    }
}


<span class="keyword">struct</span> AVPlayerView: <span class="type">UIViewControllerRepresentable</span> {
  
  <span class="keyword">func</span> makeUIViewController(context: <span class="type">Context</span>) -&gt; <span class="type">AVPlayerViewController</span> {
    <span class="keyword">let</span> pvc = <span class="type">AVPlayerViewController</span>()
    
    <span class="keyword">let</span> url = <span class="type">URL</span>(string: <span class="string">"http://159.203.191.136/8-Week8-Introduction.mp4"</span>)!
    <span class="keyword">let</span> player = <span class="type">AVPlayer</span>(url: url)
    pvc.<span class="property">player</span> = player
    <span class="keyword">return</span> pvc
  }
  
  <span class="keyword">func</span> updateUIViewController(<span class="keyword">_</span> uiViewController: <span class="type">AVPlayerViewController</span>, context: <span class="type">Context</span>) {}
}

</code></pre><p>The methods that you need to implement are similar to <code>UIViewRepresentable</code>, so this pattern should be familiar to you by now.</p><p>Let's run this in the simulator, both for the iPhone and iPad so we can look at the differences. Both players are almost identical, and pretty full featured - all of the same functionality you see in Apple's built in video players (e.g. in the Apple TV app) are seen here - full screen buttons, scrubbers, play buttons, and time stamp indicators. The key difference between the iPad and the iPhone is that the iPad has an additional icon in the upper left hand corner, which will drop the video down to Picture in Picture mode.<br><br></p><p class="info"> From everything I've read, iOS14 *should* allow the iPhone 12 version also display a Picture in Picture button, but for some reason it does not, even though the functionality is used by many apps</p><p>When Picture in Picture is enabled, I can go back to the home screen, and the video stays in place, floating above the home screen. I can move it to different corners of the screen, and when I'm ready to restore back to the full sized movie, pressing that button will bring the app back to the foreground and put the video back in place. Not bad for about 20 lines of code!</p><p>Note that we didn't have a <code>Coordinator</code> class defined here. All of the delegate methods on the <code>AVPlayerViewControllerDelegate</code> protocol are optional, so unless you <em>want</em> to customize behaviors, such as what happens right before or right after PiP starts (for example), you don't need a Coordinator. If you do though, the code stub looks like this:</p><pre><code><span class="keyword">func</span> makeCoordinator() -&gt; <span class="type">Coordinator</span> {
  <span class="type">Coordinator</span>()
}

<span class="keyword">class</span> Coordinator: <span class="type">NSObject</span>, <span class="type">AVPlayerViewControllerDelegate</span> {

  <span class="keyword">override init</span>() {

  }
  
  <span class="comment">//implements AVPlayerViewControllerDelegate methods here</span>

}
</code></pre><p>As you can see, playing a video in AVKit is pretty easy, and you get all the basic controls for free!</p><p style="float: left">Previous:  <A HREF="../../Week08/01-IntroductionToAVKit/index.html">Introduction to AVKit</A></p><p style="float: right">Next:  <A HREF="../../Week08/03-IntroductionToInAppPurchases/index.html">Introduction to InAppPurchases</A></p><BR/><BR/></div><leftside><u><p>Week 8</p></u><div class="weekSection"><ul><li><div class="comment-container"><div class="tocItem"><a id="Week 08 Overview" href="../../Week08/00-Week08Overview/index.html">Week 08 Overview</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Introduction to AVKit" href="../../Week08/01-IntroductionToAVKit/index.html">Introduction to AVKit</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="AVKit Example" href="../../Week08/02-AVKitExample/index.html">AVKit Example</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Introduction to InAppPurchases" href="../../Week08/03-IntroductionToInAppPurchases/index.html">Introduction to InAppPurchases</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="IAP Enabling" href="../../Week08/04-IAPEnabling/index.html">IAP Enabling</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="IAP Creating" href="../../Week08/05-IAPCreating/index.html">IAP Creating</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="IAP Items List" href="../../Week08/06-IAPItemsList/index.html">IAP Items List</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="IAP Purchasing" href="../../Week08/07-IAPPurchasing/index.html">IAP Purchasing</a></div></div></li></ul></div></leftside><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated February 1, 2025 at 3:31 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></div></body></html>