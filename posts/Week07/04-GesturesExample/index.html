<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week07/04-GesturesExample"/><meta name="twitter:url" content="https://hococoder.com/posts/Week07/04-GesturesExample"/><meta name="og:url" content="https://hococoder.com/posts/Week07/04-GesturesExample"/><title>Week 7 - Gestures Example | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 7 - Gestures Example | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 7 - Gestures Example | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Mobile Application Development for the iOS Platform</a><nav><ul><li><a href="/epp_605_687_fall_2022/posts/Intro/About Me">AboutMe</a></li><li><a href="/epp_605_687_fall_2022/posts/Intro/Example App">ExampleApp</a></li><li><a href="/epp_605_687_fall_2022/posts/Week00/00-Week00Overview">Week0</a></li><li><a href="/epp_605_687_fall_2022/posts/Week01/00-Week01Overview">Week1</a></li><li><a href="/epp_605_687_fall_2022/posts/Week02/00-Week02Overview">Week2</a></li><li><a href="/epp_605_687_fall_2022/posts/Week03/00-Week03Overview">Week3</a></li><li><a href="/epp_605_687_fall_2022/posts/Week04/00-Week04Overview">Week4</a></li><li><a href="/epp_605_687_fall_2022/posts/Week05/00-Week05Overview">Week5</a></li><li><a href="/epp_605_687_fall_2022/posts/Week06/00-Week06Overview">Week6</a></li><li><a href="/epp_605_687_fall_2022/posts/Week07/00-Week07Overview">Week7</a></li><li><a href="/epp_605_687_fall_2022/posts/Week08/00-Week08Overview">Week8</a></li><li><a href="/epp_605_687_fall_2022/posts/Week09/00-Week09Overview">Week9</a></li><li><a href="/epp_605_687_fall_2022/posts/Week10/00-Week10Overview">Week10</a></li><li><a href="/epp_605_687_fall_2022/posts/Week11/00-Week11Overview">Week11</a></li><li><a href="/epp_605_687_fall_2022/posts/Week12/00-Week12Overview">Week12</a></li><li><a href="/epp_605_687_fall_2022/posts/Week13/00-Week13Overview">Week13</a></li><li><a href="/epp_605_687_fall_2022/posts/Week14/00-Week14Overview">Week14</a></li></ul></nav></div></header><div class="wrapper"><h1>Week 7 - Gestures Example</h1><p style="float: left">Previous:  <A HREF="../03-IntroductionToGestures/index.html">Introduction to Gestures</A></p><p style="float: right">Next:  <A HREF="../05-IntroductionToNotifications/index.html" class="nextModule">Introduction to Notifications</A></p><BR/><BR/><center> <iframe width="1280" height="720" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.81.2/mwEmbedFrame.php/p/1458241/uiconf_id/14487351/entry_id/1_pvfhnbmd?wid=_1458241&iframeembed=true&playerId=kaltura_player&entry_id=1_pvfhnbmd&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[mediaProxy.preferedFlavorBR]=2500&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;flashvars[EmbedPlayer.NotPlayableDownloadLink]=true;&wid=1_abkvs1gz"allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player">
  </iframe>
</center><p>OK, I have Xcode open, a SwiftUI view ready to go. To demonstrate these gestures, I'm going to use either a text field or a Rectangle. <em>Any</em> SwiftUI view can have gestures attached to them, either in code, or by dragging modifiers over from the library.</p><p>Start by adding a <code>VStack</code> and putting in a <code>Spacer</code> and a <code>Text</code> view that will take in an outputString, which is a <code>@State</code> property we can define at the top of the view. This will give us some status as we are interacting with the gestures.</p><pre><code><span class="keyword">struct</span> GesturesView: <span class="type">View</span> {

  <span class="keyword">@State var</span> outputString: <span class="type">String</span>

  <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">VStack</span> {
    
      <span class="type">Spacer</span>(minLength: <span class="number">50</span>)
      <span class="type">Text</span>(outputString)
    }
  }
}
</code></pre><p>Let’s start with the tap gesture recognizer. Make a <code>Text</code> view and attach an <code>onTapGesture</code> modifier to it (either through typing it or dragging from the library). Set the number of taps for the gesture to be 3, and inside the closure body, set the output string to something to let us know the gesture fired.</p><pre><code>       <span class="type">Text</span>(<span class="string">"Tap 3 times"</span>)
        .<span class="call">onTapGesture</span>(count: <span class="number">3</span>) {
          <span class="keyword">self</span>.<span class="property">outputString</span> = <span class="string">"Triple tapped!"</span>
        }
</code></pre><p>Let’s run that now. Sure enough, single and double taps don’t work, but if I try it with 3 taps, it invokes the closure.</p><p>Next, let's look at a swipe gesture. Make a <code>@State</code> property to track the position of the frame we will be swiping</p><pre><code><span class="keyword">@State var</span> swipePosition: <span class="type">CGPoint</span> = <span class="type">CGPoint</span>(x: <span class="number">75</span>, y: <span class="number">15</span>)
</code></pre><p>Then, make another <code>Text</code> view and set its position to the property we just defined. Then add a <code>gesture</code> modifier and within that, add a <code>DragGesture()</code>.</p><pre><code>       <span class="type">Text</span>(<span class="string">"Swipe Gesture"</span>).<span class="call">position</span>(swipePosition)
        .<span class="dotAccess">gesture</span> (
            <span class="type">DragGesture</span>()
</code></pre><p>On the <code>DragGesture</code> apply 2 other modifiers - <code>onChanged</code> and <code>onEnded</code>. Both feed into the closure a <code>DragGesture.Value</code> object that among other things, gives the current location of the drag. Since we're swiping here, and want to confine the movement of the view, we can use this value to update the position of the x coordinate of the swipePosition, keeping the y value constant, as long as the translation of the view in the y direction isn't too large. For the <code>onEnded</code> modifier, just reset our <code>outputString</code>.</p><pre><code>               .<span class="dotAccess">onChanged</span>{ value <span class="keyword">in
                if</span> (value.<span class="property">translation</span>.<span class="property">height</span> &lt;= <span class="number">5</span>)
                {
                  <span class="keyword">self</span>.<span class="property">outputString</span> = <span class="string">"Swiped to</span> \(value.<span class="property">location</span>)<span class="string">!"</span>
                  <span class="keyword">self</span>.<span class="property">swipePosition</span> = <span class="type">CGPoint</span>(x: value.<span class="property">location</span>.<span class="property">x</span>, y: <span class="number">15</span>)
                }
              }
              .<span class="dotAccess">onEnded</span>{ value <span class="keyword">in
                self</span>.<span class="property">outputString</span> = <span class="string">"Ready!"</span>
              }
        )
</code></pre><p>Run that in the simulator. The text view slides left and right as long as our finger doesn't vary too much in the vertical direction</p><p>We can do something similar if we want to drag a view anywhere in its parent, not just in one direction. Again, make a <code>@State</code> property for the drag position</p><pre><code><span class="keyword">@State var</span> dragPosition: <span class="type">CGPoint</span> = <span class="type">CGPoint</span>(x: <span class="number">75</span>, y: <span class="number">25</span>)
</code></pre><p>Then define a <code>Text</code> view, and set the position with the <code>dragPosition</code> property. Again, add a <code>gesture</code> modifier and add a <code>DragGesture</code>. Use the <code>onChanged</code> and <code>onEnded</code> modifiers as before, but don't limit the new position - just set it to the <code>value.location</code> property.</p><pre><code>       <span class="type">Text</span>(<span class="string">"Pan(Drag Gestures)"</span>).<span class="call">position</span>(dragPosition)
        .<span class="dotAccess">gesture</span> (
          <span class="type">DragGesture</span>()
            .<span class="dotAccess">onChanged</span>{ value <span class="keyword">in
              self</span>.<span class="property">outputString</span> = <span class="string">"Dragged to</span> \(value.<span class="property">location</span>)<span class="string">!"</span>
              <span class="keyword">self</span>.<span class="property">dragPosition</span> = value.<span class="property">location</span>
            }
            .<span class="dotAccess">onEnded</span>{ amount <span class="keyword">in
              self</span>.<span class="property">outputString</span> = <span class="string">"Ready!"</span>
            }
      )
</code></pre><p>Run that in the simulator. We can move this view anywhere we want on screen!</p><p>What if we wanted that view to snap back when we were done? We can change the <code>@State</code> property wrapper to a <code>@GestureState</code> property wrapper to make the value reset when we're done.</p><pre><code><span class="keyword">@GestureState var</span> dragPosition: <span class="type">CGPoint</span> = <span class="type">CGPoint</span>(x: <span class="number">75</span>, y: <span class="number">25</span>)
</code></pre><p>To support this though, we have to switch from the <code>onChanged</code> modifier to the <code>updating</code> one.</p><pre><code>.<span class="call">updating</span>(<span class="property">$dragPosition</span>) {value, state, transaction <span class="keyword">in</span>
  state = value.<span class="property">location</span>
}
</code></pre><p>Run this in the simulator. As before the view moves around, but this time when it ends, the view returns to its original location!</p><p>Now let's switch to a <code>Rectangle</code> to test out the next 2 gestures. Make a <code>ZStack</code> that has a Rectangle of size 150x150, and filled red. After that, put a <code>Text</code> view that says "Pinch Gestures"</p><pre><code>       <span class="type">ZStack</span> {
        <span class="type">Rectangle</span>().<span class="call">fill</span>(<span class="type">Color</span>.<span class="property">red</span>).<span class="call">frame</span>(width: <span class="number">150</span>, height: <span class="number">150</span>)
        <span class="type">Text</span>(<span class="string">"Pinch Gestures"</span>)
      }
</code></pre><p>Then attach a <code>gesture</code> modifier and add a <code>MagnificationGesture</code>. Inside <code>onChanged</code>, list the amount of the pinch, and in <code>onEnded</code>, reset the output string to "Ready"</p><pre><code>       .<span class="dotAccess">gesture</span> (
        <span class="type">MagnificationGesture</span>()
        .<span class="dotAccess">onChanged</span>{ amount <span class="keyword">in
            self</span>.<span class="property">outputString</span> = <span class="string">"Pinched</span> \(amount)<span class="string">!"</span>
        }
        .<span class="dotAccess">onEnded</span>{ amount <span class="keyword">in
            self</span>.<span class="property">outputString</span> = <span class="string">"Ready!"</span>
        }
      )
</code></pre><p>Run this in the simulator. To simulate a 2 finger pinch in the simulator, with the mouse over the simulator, hold down option, and you'll see 2 fingers appear. Moving the mouse will bring the fingers further apart or closer together. If you need to shift the overall position of those fingers, <strong>while you are holding down option</strong> also hold down Shift, and you can move them around as a pair without adjusting their separation.</p><p>Note here that we're not zooming in on the view with this gesture, but the values returned from the gesture could be used in coordination with a <code>scaleEffect</code> modifier to shrink or enlarge the view.</p><p>Make another Rectangle/Text pair, this time for a rotation gesture. Add a <code>gesture</code> modifier using a <code>RotationGesture</code>, and again in the <code>onChanged</code> method list the rotation angle, and in <code>onEnded</code> reset the state of the <code>outputString</code>.</p><pre><code>       <span class="type">ZStack</span> {
        <span class="type">Rectangle</span>().<span class="call">fill</span>(<span class="type">Color</span>.<span class="property">green</span>).<span class="call">frame</span>(width: <span class="number">150</span>, height: <span class="number">150</span>)
        <span class="type">Text</span>(<span class="string">"Rotate Me"</span>)
      }.gesture (
          <span class="type">RotationGesture</span>()
            .<span class="dotAccess">onChanged</span>{angle <span class="keyword">in
              self</span>.<span class="property">outputString</span> = <span class="string">"Rotated</span> \(angle.<span class="property">degrees</span>) <span class="string">degrees!"</span>
            }
            .<span class="dotAccess">onEnded</span>{angle <span class="keyword">in
              self</span>.<span class="property">outputString</span> = <span class="string">"Ready"</span>
            }
        )
</code></pre><p>Again you can use option and shift, if needed, to get the simulator "fingers" in the right position. Then move them in a circular direction with your mouse to see the text label get updated with the rotation angle. Again, we're not moving the view here, but we could by using the angle along with a <code>rotationEffect</code> modifier on the view.</p><p>Finally, let's make another <code>Text</code> view to test a long press gesture with the <code>onLongPressGesture</code> modifier.</p><pre><code>       <span class="type">Text</span>(<span class="string">"Long Tap/Press"</span>)
        .<span class="call">onLongPressGesture</span> {
          <span class="keyword">self</span>.<span class="property">outputString</span> = <span class="string">"Pressed for a while!"</span>
        }
      <span class="type">Spacer</span>(minLength: <span class="number">50</span>)
      <span class="type">Text</span>(outputString)
    }
  }
}
</code></pre><p>Run this in the simulator. Hold down on the text field, and you'll get the notification that the long press took place. If needed a minimum time can be set on this gesture,</p><p style="float: left">Previous:  <A HREF="../03-IntroductionToGestures/index.html">Introduction to Gestures</A></p><p style="float: right">Next:  <A HREF="../05-IntroductionToNotifications/index.html" class="nextModule">Introduction to Notifications</A></p></div><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2022-2023 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated August 27, 2022, 9:35 PM</p><p><a href="https://twitter.com/hococoder" target="_blank">My Twitter</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://blackboard.jhu.edu" target="_blank">JHU Blackboard</a></p></footer></body></html>