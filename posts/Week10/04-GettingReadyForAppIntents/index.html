<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week10/04-GettingReadyForAppIntents"/><meta name="twitter:url" content="https://hococoder.com/posts/Week10/04-GettingReadyForAppIntents"/><meta name="og:url" content="https://hococoder.com/posts/Week10/04-GettingReadyForAppIntents"/><title>Week 10 - Getting Ready For App Intents | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 10 - Getting Ready For App Intents | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 10 - Getting Ready For App Intents | Mobile Application Development for the iOS Platform"/><meta name="description" content="Engineering Program for Professionals - 605.687 - 2024-2025 Academic Year"/><meta name="twitter:description" content="Engineering Program for Professionals - 605.687 - 2024-2025 Academic Year"/><meta name="og:description" content="Engineering Program for Professionals - 605.687 - 2024-2025 Academic Year"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><script src="../../../../jquery-3.7.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><div class="layout"><div class="header"><div class="headerLayout"><div class="title">Mobile Application Development for the iOS Platform</div><div class="subtitle">Engineering Program for Professionals - 605.687 - 2024-2025 Academic Year</div><div class="weeklayout"><a class="grow1" href="/epp_605_687_spring_2025/posts/Intro/About Me">About Me</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Intro/Example App">Example App</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week00/00-Week00Overview">Week 0</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week01/00-Week01Overview">Week 1</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week02/00-Week02Overview">Week 2</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week03/00-Week03Overview">Week 3</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week04/00-Week04Overview">Week 4</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week05/00-Week05Overview">Week 5</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week06/00-Week06Overview">Week 6</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week07/00-Week07Overview">Week 7</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week08/00-Week08Overview">Week 8</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week09/00-Week09Overview">Week 9</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week10/00-Week10Overview">Week 10</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week11/00-Week11Overview">Week 11</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week12/00-Week12Overview">Week 12</a><a class="grow1" href="/epp_605_687_spring_2025/posts/Week13/00-Week13Overview">Week 13</a></div></div></div><div class="wrapper"><h1>Week 10 - Getting Ready For App Intents</h1><p style="float: left">Previous:  <A HREF="../../Week10/03-TheAppIntentProtocol/index.html">The App Intent Protocol</A></p><p style="float: right">Next:  <A HREF="../../Week10/05-UsingAppIntentsWithSearch/index.html">Using App Intents with Search</A></p><BR/><BR/><div id="floater">
<h3><u>Page Contents</u></h3>
<ul><li><a href="#overview">Overview</a></li><li><a href="#donatingEntities">Donating entities</a></li></ul></div><a name="overview"></a>
<h2>Overview</h2><p>Now since you know how to make objects that adopt <code>AppIntent</code> and <code>AppEntity</code>, let's integrate the rest of the app into the App Intents framework.</p><a name="donatingEntities"></a>
<h2>Donating entities</h2><p>The OS needs to know about your entities in order to know about them, and the way you go about doing that is by "donating" the entities to the system. This is done via the <code>CoreSpotlight</code> framework, which drives interface with, you guessed it, Spotlight, the underlying search system for Apple's OSes.</p><p>Somewhere, your main app file is probably best, you can add the following code. This assumes of course that you have access to the collection object that holds all of the entities in your model - in this case, <code>lessonDataManager</code>.</p><pre><code><span class="keyword">import</span> CoreSpotlight


<span class="type">Task</span> {
  <span class="keyword">try await</span> <span class="type">CSSearchableIndex</span>
    .<span class="call">default</span>()
    .<span class="call">indexAppEntities</span>(lessonDataManager.<span class="property">lessons</span>.<span class="call">map</span>(<span class="type">LessonEntity</span>.<span class="keyword">init</span>(lesson:)))
}
</code></pre><p>This code grabs the default instance of the <code>CSSearchableIndex</code> class and indexes the entities provided by the <code>lessonDataManager</code>. This functional programming technique should hopefully look familiar to you - it is taking each of the lessons in <code>lessonDataManager</code> and using them to create a <code>LessonEntity</code> via the <code>map</code> function.</p><p>You're not done yet, though. If there are any dependencies like the <code>LessonDataManager</code> that the <code>AppIntents</code> system depends on, you'll need to register that with the <code>AppDependencyManager</code>.</p><pre><code><span class="type">AppDependencyManager</span>.<span class="property">shared</span>.<span class="call">add</span>(dependency: lessonDataManager)
</code></pre><p>This can also be done in your main app, assuming again you have access to that <code>lessonDataManager</code>-like object.</p><p>So, this gets you setup - you can create entities, intents, and can properly structure your app to use App Intents.</p><p>In the next module, we'll run the app and see how it runs!</p><p style="float: left">Previous:  <A HREF="../../Week10/03-TheAppIntentProtocol/index.html">The App Intent Protocol</A></p><p style="float: right">Next:  <A HREF="../../Week10/05-UsingAppIntentsWithSearch/index.html">Using App Intents with Search</A></p><BR/><BR/></div><leftside><u><p>Week 10</p></u><div class="weekSection"><ul><li><div class="comment-container"><div class="tocItem"><a id="Week 10 Overview" href="../../Week10/00-Week10Overview/index.html">Week 10 Overview</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Introduction to App Intents" href="../../Week10/01-IntroductionToAppIntents/index.html">Introduction to App Intents</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="The App Entity Protocol" href="../../Week10/02-TheAppEntityProtocol/index.html">The App Entity Protocol</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="The App Intent Protocol" href="../../Week10/03-TheAppIntentProtocol/index.html">The App Intent Protocol</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Getting Ready for App Intents" href="../../Week10/04-GettingReadyForAppIntents/index.html">Getting Ready for App Intents</a></div><div class="chain chain-bottom"></div></div></li><li><div class="comment-container"><div class="chain chain-top"></div><div class="tocItem"><a id="Using App Intents with Search" href="../../Week10/05-UsingAppIntentsWithSearch/index.html">Using App Intents with Search</a></div></div></li></ul></div></leftside><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated February 1, 2025 at 3:31 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></div></body></html>